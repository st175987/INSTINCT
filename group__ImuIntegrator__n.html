<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.9.6" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>INSTINCT: IMU Integrator (local-navigation frame)</title>
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="eigen_navtree_hacks.js"></script>
</head>
<body>
        <div id="top">
            <!-- do not remove this div, it is closed by doxygen! -->
            <div id="titlearea">
                <table cellspacing="0" cellpadding="0">
                    <tbody>
                        <tr style="height: 56px;">
                            <td id="projectlogo"><img alt="Logo" src="INSTINCT_Logo_Text.png" /></td>
                            <td id="projectalign" style="padding-left: 0.5em;">
                                <div id="projectname">
                                    <!-- INSTINCT -->
                                    <span id="projectnumber">&#160;1.0.2</span>
                                </div>
                            </td>
                            <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__ImuIntegrator__n.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">IMU Integrator (local-navigation frame)<div class="ingroups"><a class="el" href="group__DataProcessor__chapter.html">DataProcessor</a> &raquo; <a class="el" href="group__DataProcessor__Integrator__chapter.html">Integrator</a></div></div></div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="ImuIntegrator-Mechanization-n"></a>
Local-navigation frame mechanization</h1>
<h2><a class="anchor" id="ImuIntegrator-Mechanization-n-Attitude"></a>
Attitude</h2>
<h3><a class="anchor" id="ImuIntegrator-Mechanization-n-Attitude-DCM"></a>
Propagation of direction cosine matrix with time</h3>
<p><a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-DCM"></a> </p><p class="formulaDsp">
<picture><source srcset="form_103_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-DCM}
  \mathbf{\dot{C}}_b^n = \mathbf{C}_b^n \boldsymbol{\Omega}_{nb}^b
\end{equation}" src="form_103.svg" width="1523" height="23"/></picture>
</p>
<p> where</p><ul>
<li><picture><source srcset="form_104_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{\Omega}_{nb}^b $" src="form_104.svg" width="30" height="23"/></picture> is the skew symmetric form of <picture><source srcset="form_105_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{\omega}_{nb}^b $" src="form_105.svg" width="28" height="21"/></picture>, the body rate with respect to the navigation frame</li>
</ul>
<p>see</p><ul>
<li><a class="el" href="citelist.html#CITEREF_Titterton2004">[33]</a> Titterton, ch. 3.5.3, eq. 3.28, p. 32</li>
<li><a class="el" href="citelist.html#CITEREF_Jekeli2001">[14]</a> Jekeli, ch. 4.3.4, eq. 4.104, p. 130</li>
<li><a class="el" href="citelist.html#CITEREF_Groves2013">[11]</a> Groves, ch. 5.4.1, eq. 5.39, p. 176</li>
</ul>
<p>The body rate with respect to the navigation frame <picture><source srcset="form_105_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{\omega}_{nb}^b $" src="form_105.svg" width="28" height="21"/></picture> can be expressed as <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-omega-nb"></a> </p><p class="formulaDsp">
<picture><source srcset="form_106_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-omega-nb}
  \boldsymbol{\omega}_{nb}^b = \boldsymbol{\omega}_{ib}^b - \mathbf{C}_n^b [\boldsymbol{\omega}_{ie}^n + \boldsymbol{\omega}_{en}^n]
\end{equation}" src="form_106.svg" width="1577" height="21"/></picture>
</p>
<p> this together with the skew-symmetric matrix transformation (see <a class="el" href="citelist.html#CITEREF_Groves2013">[11]</a> Groves, ch. 2.3.1, eq. 2.51, p. 45) <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-skew-symmetric-matrix-transform"></a> </p><p class="formulaDsp">
<picture><source srcset="form_107_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-skew-symmetric-matrix-transform}
  \mathbf{\Omega}_{\beta\alpha}^\delta = \mathbf{C}_\gamma^\delta \mathbf{\Omega}_{\beta\alpha}^\gamma \mathbf{C}_\delta^\gamma
\end{equation}" src="form_107.svg" width="1540" height="26"/></picture>
</p>
<p> leads to the skew symmetric form of <a class="el" href="group__ImuIntegrator__n.html#eq-ImuIntegrator-Mechanization-n-Attitude-DCM"><picture><source srcset="form_108_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="\eqref{eq:eq-ImuIntegrator-Mechanization-n-Attitude-DCM}" src="form_108.svg" width="33" height="19"/></picture> </a> <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-DCM-full"></a> </p><p class="formulaDsp">
<picture><source srcset="form_109_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-DCM-full}
  \mathbf{\dot{C}}_b^n = \mathbf{C}_b^n \boldsymbol{\Omega}_{ib}^b - (\boldsymbol{\Omega}_{ie}^n + \boldsymbol{\Omega}_{en}^n) \mathbf{C}_b^n
\end{equation}" src="form_109.svg" width="1589" height="23"/></picture>
</p>
<h3><a class="anchor" id="ImuIntegrator-Mechanization-n-Attitude-Euler"></a>
Propagation of Euler angles with time</h3>
<p>The gimbal angles <picture><source srcset="form_110_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ R $" src="form_110.svg" width="14" height="14"/></picture> (roll), <picture><source srcset="form_111_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ P $" src="form_111.svg" width="14" height="14"/></picture> (pitch), <picture><source srcset="form_112_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ Y $" src="form_112.svg" width="14" height="14"/></picture> (yaw) are related to the body rates as follows: <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Euler-relation"></a> </p><p class="formulaDsp">
<picture><source srcset="form_113_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Euler-relation}
  \begin{bmatrix} \omega_{nb,x}^b \\ \omega_{nb,y}^b \\ \omega_{nb,z}^b \end{bmatrix}
      = \begin{bmatrix} \dotup{R} \\ 0 \\ 0 \end{bmatrix}
        + \mathbf{C_3} \begin{bmatrix} 0 \\ \dotup{P} \\ 0 \end{bmatrix}
        + \mathbf{C_3} \mathbf{C_2} \begin{bmatrix} 0 \\ 0 \\ \dotup{Y} \end{bmatrix}
\end{equation}" src="form_113.svg" width="1624" height="67"/></picture>
</p>
<p> where</p><ul>
<li><picture><source srcset="form_114_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \mathbf{C_3} = \begin{bmatrix} 1 &amp;     0    &amp;    0    \\
                                     0 &amp;  \cos{R} &amp; \sin{R} \\
                                     0 &amp; -\sin{R} &amp; \cos{R} \end{bmatrix} $" src="form_114.svg" width="201" height="63"/></picture> is the rotation <picture><source srcset="form_110_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ R $" src="form_110.svg" width="14" height="14"/></picture> about the x-axis (see <a class="el" href="citelist.html#CITEREF_Titterton2004">[33]</a> Titterton, ch. 3.6.3.2, eq. 3.46, p. 41)</li>
<li><picture><source srcset="form_115_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \mathbf{C_2} = \begin{bmatrix} \cos{P} &amp; 0 &amp; -\sin{P} \\
                                        0    &amp; 1 &amp;     0    \\
                                     \sin{P} &amp; 0 &amp;  \cos{P} \end{bmatrix} $" src="form_115.svg" width="203" height="63"/></picture> is the rotation <picture><source srcset="form_111_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ P $" src="form_111.svg" width="14" height="14"/></picture> about the y-axis (see <a class="el" href="citelist.html#CITEREF_Titterton2004">[33]</a> Titterton, ch. 3.6.3.2, eq. 3.45, p. 41)</li>
<li><picture><source srcset="form_116_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{\omega}_{nb}^b = \begin{pmatrix} \omega_{nb,x}^b &amp; \omega_{nb,y}^b &amp; \omega_{nb,z}^b \end{pmatrix}^T $" src="form_116.svg" width="228" height="28"/></picture> is the body rate with respect to the navigation frame, expressed in the body frame</li>
</ul>
<p>This can be rearranged into: <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Euler"></a> </p><p class="formulaDsp">
<picture><source srcset="form_117_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Euler}
\begin{aligned}
  \dotup{R} &amp;= (\omega_{nb,y}^b \sin{R} + \omega_{nb,z}^b \cos{R}) \tan{P} + \omega_{nb,x}^b \\
  \dotup{P} &amp;= \omega_{nb,y}^b \cos{R} - \omega_{nb,z}^b \sin{R} \\
  \dotup{Y} &amp;= (\omega_{nb,y}^b \sin{R} + \omega_{nb,z}^b \cos{R}) \sec{P} \\
\end{aligned}
\end{equation}" src="form_117.svg" width="1640" height="84"/></picture>
</p>
<p>see</p><ul>
<li><a class="el" href="citelist.html#CITEREF_Titterton2004">[33]</a> Titterton, ch. 3.6.3.3, eq. 3.52, p. 42</li>
<li><a class="el" href="citelist.html#CITEREF_Gleason2009">[8]</a> Gleason, ch. 6.2.3.1, eq. 6.7, p. 153 (top left term in eq. 6.8 should be <picture><source srcset="form_118_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \cos{\theta} $" src="form_118.svg" width="35" height="14"/></picture> instead of <picture><source srcset="form_119_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ 1 $" src="form_119.svg" width="9" height="14"/></picture>)</li>
</ul>
<h3><a class="anchor" id="ImuIntegrator-Mechanization-n-Attitude-Quaternion"></a>
Propagation of quaternion with time</h3>
<p>The quaternion <picture><source srcset="form_85_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \mathbf{q} = a + \mathbf{i} b + \mathbf{j} c + \mathbf{k} d $" src="form_85.svg" width="154" height="16"/></picture> propagates as (see <a class="el" href="citelist.html#CITEREF_Titterton2004">[33]</a> Titterton, ch. 3.6.4.3, eq. 3.60-3.62, p. 44) <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-base"></a> </p><p class="formulaDsp">
<picture><source srcset="form_120_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-base}
  \mathbf{\dot{q}}_b^n = 0.5 \mathbf{q}_b^n \cdot \mathbf{p}_{nb}^b
\end{equation}" src="form_120.svg" width="1535" height="21"/></picture>
</p>
<p> where <picture><source srcset="form_121_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \mathbf{p}_{nb}^b = \begin{pmatrix} 0 &amp; \boldsymbol{\omega}_{nb}^b \end{pmatrix}^T = \begin{pmatrix} 0 &amp; \omega_{nb,x}^b &amp; \omega_{nb,y}^b &amp; \omega_{nb,z}^b \end{pmatrix}^T $" src="form_121.svg" width="357" height="28"/></picture></p>
<p>This can be written in matrix form as <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-base-matrix"></a> </p><p class="formulaDsp">
<picture><source srcset="form_122_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-base-matrix}
  \mathbf{\dot{q}}_b^n
      = \begin{bmatrix} \dotup{a} \\ \dotup{b} \\ \dotup{c} \\ \dotup{d} \end{bmatrix}
      = 0.5 \begin{bmatrix} a &amp; -b &amp; -c &amp; -d \\
                            b &amp;  a &amp; -d &amp;  c \\
                            c &amp;  d &amp;  a &amp; -b \\
                            d &amp; -c &amp;  b &amp;  a \end{bmatrix}
            \begin{bmatrix} 0 \\ \omega_{nb,x}^b \\ \omega_{nb,y}^b \\ \omega_{nb,z}^b \end{bmatrix}
\end{equation}" src="form_122.svg" width="1642" height="86"/></picture>
</p>
<p> that is <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-components"></a> </p><p class="formulaDsp">
<picture><source srcset="form_123_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-components}
\begin{aligned}
  \dotup{a} &amp;= -0.5 (b \omega_{nb,x}^b + c \omega_{nb,y}^b + d \omega_{nb,z}^b) &amp;=  0.5 ( 0 \cdot a - \omega_{nb,x}^b b - \omega_{nb,y}^b c - \omega_{nb,z}^b d) \\
  \dotup{b} &amp;=  0.5 (a \omega_{nb,x}^b - d \omega_{nb,y}^b + c \omega_{nb,z}^b) &amp;=  0.5 (\omega_{nb,x}^b a +  0 \cdot b + \omega_{nb,z}^b c - \omega_{nb,y}^b d) \\
  \dotup{c} &amp;=  0.5 (d \omega_{nb,x}^b + a \omega_{nb,y}^b - b \omega_{nb,z}^b) &amp;=  0.5 (\omega_{nb,y}^b a - \omega_{nb,z}^b b +  0 \cdot c + \omega_{nb,x}^b d) \\
  \dotup{d} &amp;= -0.5 (c \omega_{nb,x}^b - b \omega_{nb,y}^b - a \omega_{nb,z}^b) &amp;=  0.5 (\omega_{nb,z}^b a + \omega_{nb,y}^b b - \omega_{nb,x}^b c +  0 \cdot d) \\
\end{aligned}
\end{equation}" src="form_123.svg" width="1755" height="112"/></picture>
</p>
<p>and this can be written in matrix form again as <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-matrix-Titterton"></a> </p><p class="formulaDsp">
<picture><source srcset="form_124_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-matrix-Titterton}
  \mathbf{\dot{q}}_b^n
      = \begin{bmatrix} \dotup{a} \\ \dotup{b} \\ \dotup{c} \\ \dotup{d} \end{bmatrix}
      = \frac{1}{2} \begin{bmatrix}        0        &amp; -\omega_{nb,x}^b &amp; -\omega_{nb,y}^b &amp; -\omega_{nb,z}^b \\
                                    \omega_{nb,x}^b &amp;        0         &amp;  \omega_{nb,z}^b &amp; -\omega_{nb,y}^b \\
                                    \omega_{nb,y}^b &amp; -\omega_{nb,z}^b &amp;        0         &amp;  \omega_{nb,x}^b \\
                                    \omega_{nb,z}^b &amp;  \omega_{nb,y}^b &amp; -\omega_{nb,x}^b &amp;        0         \end{bmatrix}
                    \begin{bmatrix} a \\ b \\ c \\ d \end{bmatrix}
\end{equation}" src="form_124.svg" width="1682" height="89"/></picture>
</p>
<p> see</p><ul>
<li><a class="el" href="citelist.html#CITEREF_Titterton2004">[33]</a> Titterton, ch. 11.2.5, eq. 11.33-11.35, p. 319</li>
</ul>
<h2><a class="anchor" id="ImuIntegrator-Mechanization-n-Velocity"></a>
Velocity</h2>
<p>The derivative of the velocity in local-navigation coordinates can be expressed as</p>
<p><a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Velocity"></a> </p><p class="formulaDsp">
<picture><source srcset="form_125_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Velocity}
  \boldsymbol{\dot{v}}^n
      = \overbrace{\boldsymbol{f}^n}^{\hidewidth\text{measured}\hidewidth}
        -\ \underbrace{(2 \boldsymbol{\omega}_{ie}^n + \boldsymbol{\omega}_{en}^n) \times \boldsymbol{v}^n}_{\text{coriolis acceleration}}
        +\ \overbrace{\boldsymbol{\gamma}^n}^{\hidewidth\text{gravitation}\hidewidth}
        -\ \mathbf{C}_e^n \cdot \underbrace{\left(\boldsymbol{\omega}_{ie}^e \times [ \boldsymbol{\omega}_{ie}^e \times \mathbf{x}^e ] \right)}_{\text{centrifugal acceleration}}
\end{equation}" src="form_125.svg" width="1720" height="70"/></picture>
</p>
<p> where</p><ul>
<li><picture><source srcset="form_126_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{v}^n = \begin{pmatrix} v_N &amp; v_E &amp; v_D \end{pmatrix}^T $" src="form_126.svg" width="168" height="26"/></picture> is the velocity with respect to the Earth in local-navigation frame coordinates,</li>
<li><picture><source srcset="form_127_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{f}^n = \begin{pmatrix} f_N &amp; f_E &amp; f_D \end{pmatrix}^T $" src="form_127.svg" width="170" height="26"/></picture> is the specific force vector as measured by a triad of accelerometers and resolved into local-navigation frame coordinates</li>
<li><picture><source srcset="form_128_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{\omega}_{ie}^n $" src="form_128.svg" width="25" height="18"/></picture> is the turn rate of the Earth expressed in local-navigation frame coordinates</li>
<li><picture><source srcset="form_129_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{\omega}_{en}^n $" src="form_129.svg" width="28" height="18"/></picture> is the turn rate of the local frame with respect to the Earth-fixed frame, called the transport rate, expressed in local-navigation frame coordinates</li>
<li><picture><source srcset="form_130_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{\gamma}^n $" src="form_130.svg" width="21" height="18"/></picture> the local gravitation vector (caused by effects of mass attraction)</li>
</ul>
<p>see</p><ul>
<li><a class="el" href="citelist.html#CITEREF_Titterton2004">[33]</a> Titterton, ch. 3.5.3, eq. 3.27, p. 32</li>
<li><a class="el" href="citelist.html#CITEREF_Jekeli2001">[14]</a> Jekeli, ch. 4.3.4, eq. 4.88, p. 127</li>
<li><a class="el" href="citelist.html#CITEREF_Groves2013">[11]</a> Groves, ch. 5.4.3, eq. 5.53, p. 179</li>
</ul>
<h2><a class="anchor" id="ImuIntegrator-Mechanization-n-Position"></a>
Position</h2>
<p><a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Position"></a> </p><p class="formulaDsp">
<picture><source srcset="form_131_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Position}
\begin{aligned}
  \dotup{\phi}    &amp;= \frac{v_N}{R_N + h} \\
  \dotup{\lambda} &amp;= \frac{v_E}{(R_E + h) \cos{\phi}} \\
  \dotup{h}       &amp;= -v_D
\end{aligned}
\end{equation}" src="form_131.svg" width="1545" height="105"/></picture>
</p>
<p> where</p><ul>
<li><picture><source srcset="form_132_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \begin{pmatrix} \phi &amp; \lambda &amp; h \end{pmatrix}^T $" src="form_132.svg" width="89" height="26"/></picture> is the latitude, longitude and altitude above the ellipsoid,</li>
<li><picture><source srcset="form_133_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ R_N $" src="form_133.svg" width="26" height="16"/></picture> is the North/South (meridian) earth radius,</li>
<li><picture><source srcset="form_134_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ R_E $" src="form_134.svg" width="25" height="16"/></picture> is the East/West (prime vertical) earth radius</li>
</ul>
<p>see</p><ul>
<li><a class="el" href="citelist.html#CITEREF_Titterton2004">[33]</a> Titterton, ch. 3.7, eq. 3.81,3.85,3.86, p. 48ff</li>
<li><a class="el" href="citelist.html#CITEREF_Jekeli2001">[14]</a> Jekeli, ch. 4.3.4, eq. 4.97, p. 128</li>
<li><a class="el" href="citelist.html#CITEREF_Groves2013">[11]</a> Groves, ch. 2.4.2, eq. 2.111, p. 61</li>
</ul>
<h1><a class="anchor" id="ImuIntegrator-n-Appendix"></a>
Appendix</h1>
<h2><a class="anchor" id="ImuIntegrator-Mechanization-n-Attitude-Quaternion-Comparison"></a>
Quaternion propagation comparison</h2>
<p>Different books have different forms of the quaternion propagation, therefore this shall be discussed here.</p>
<h3><a class="anchor" id="ImuIntegrator-Mechanization-n-Attitude-Quaternion-Comparison-Titterton"></a>
Titterton</h3>
<p>The matrix form for the propagation is (see <a class="el" href="citelist.html#CITEREF_Titterton2004">[33]</a> Titterton, ch. 11.2.5, eq. 11.33-11.35, p. 319) <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-matrix-Titterton-2"></a> </p><p class="formulaDsp">
<picture><source srcset="form_135_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-matrix-Titterton-2}
  \mathbf{\dot{q}}_b^n
      = \begin{bmatrix} \dotup{a} \\ \dotup{b} \\ \dotup{c} \\ \dotup{d} \end{bmatrix}
      = \frac{1}{2} \begin{bmatrix}        0        &amp; -\omega_{nb,x}^b &amp; -\omega_{nb,y}^b &amp; -\omega_{nb,z}^b \\
                                    \omega_{nb,x}^b &amp;        0         &amp;  \omega_{nb,z}^b &amp; -\omega_{nb,y}^b \\
                                    \omega_{nb,y}^b &amp; -\omega_{nb,z}^b &amp;        0         &amp;  \omega_{nb,x}^b \\
                                    \omega_{nb,z}^b &amp;  \omega_{nb,y}^b &amp; -\omega_{nb,x}^b &amp;        0         \end{bmatrix}
                    \begin{bmatrix} a \\ b \\ c \\ d \end{bmatrix}
\end{equation}" src="form_135.svg" width="1682" height="89"/></picture>
</p>
<p> which can be converted into a direction cosine matrix with <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-DCM-Titterton"></a> </p><p class="formulaDsp">
<picture><source srcset="form_136_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-DCM-Titterton}
  \mathbf{C}_b^n = \begin{bmatrix} (a^2 + b^2 - c^2 - d^2) &amp;       2(bc - ad)        &amp;       2(bd + ac)        \\
                                         2(bc + ad)        &amp; (a^2 - b^2 + c^2 - d^2) &amp;       2(cd - ab)        \\
                                         2(bd - ac)        &amp;       2(cd + ab)        &amp; (a^2 - b^2 - c^2 + d^2) \end{bmatrix}
\end{equation}" src="form_136.svg" width="1738" height="63"/></picture>
</p>
<p> the quaternion is defined as (see <a class="el" href="citelist.html#CITEREF_Titterton2004">[33]</a> Titterton, ch. 3.6.4.2, eq. 3.57, p. 43) <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-rotation-Titterton"></a> </p><p class="formulaDsp">
<picture><source srcset="form_137_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-rotation-Titterton}
  \mathbf{r}^n = \mathbf{q} \mathbf{r}^b \mathbf{q}^* \Rightarrow \mathbf{q} = \mathbf{q}_b^n
\end{equation}" src="form_137.svg" width="1556" height="21"/></picture>
</p>
<h3><a class="anchor" id="ImuIntegrator-Mechanization-n-Attitude-Quaternion-Comparison-Jekeli"></a>
Jekeli</h3>
<p>Jekeli defines the equations from the body frame to an arbitrary frame, which in our case is the n-frame. Therefore his equations become (<a class="el" href="citelist.html#CITEREF_Jekeli2001">[14]</a> Jekeli, ch. 4.2.3.1, eq. 4.20, p. 114) <a class="anchor" id="q-ImuIntegrator-Mechanization-n-Attitude-DCM-Jekeli"></a> </p><p class="formulaDsp">
<picture><source srcset="form_138_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:q-ImuIntegrator-Mechanization-n-Attitude-DCM-Jekeli}
\begin{aligned}
   \mathbf{\dot{C}}_b^a &amp;= \mathbf{C}_b^a \boldsymbol{\Omega}_{ab}^b \\
   \mathbf{\dot{C}}_b^n &amp;= \mathbf{C}_b^n \boldsymbol{\Omega}_{nb}^b
\end{aligned}
\end{equation}" src="form_138.svg" width="1523" height="51"/></picture>
</p>
<p>The quaternion is defined by Jekeli over the direction cosine matrix which is (<a class="el" href="citelist.html#CITEREF_Jekeli2001">[14]</a> Jekeli, ch. 4.2.3.1, eq. 4.22, p. 114) <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-DCM-Jekeli"></a> </p><p class="formulaDsp">
<picture><source srcset="form_139_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-DCM-Jekeli}
\begin{aligned}
  \mathbf{C}_b^n &amp;= \begin{bmatrix} (a^2 + b^2 - c^2 - d^2) &amp;       2(bc + ad)        &amp;       2(bd - ac)        \\
                                          2(bc - ad)        &amp; (a^2 - b^2 + c^2 - d^2) &amp;       2(cd + ab)        \\
                                          2(bd + ac)        &amp;       2(cd - ab)        &amp; (a^2 - b^2 - c^2 + d^2) \end{bmatrix} \\
                 &amp;= \begin{bmatrix} ((a^*)^2 + (-b^*)^2 - (-c^*)^2 - (-d^*)^2) &amp;       2((-b^*)(-c^*) + (a^*)(-d^*))        &amp;       2((-b^*)(-d^*) - (a^*)(-c^*))        \\
                                          2((-b^*)(-c^*) - (a^*)(-d^*))        &amp; ((a^*)^2 - (-b^*)^2 + (-c^*)^2 - (-d^*)^2) &amp;       2((-c^*)(-d^*) + (a^*)(-b^*))        \\
                                          2((-b^*)(-d^*) + (a^*)(-c^*))        &amp;       2((-c^*)(-d^*) - (a^*)(-b^*))        &amp; ((a^*)^2 - (-b^*)^2 - (-c^*)^2 + (-d^*)^2) \end{bmatrix} \\
                 &amp;= \begin{bmatrix} ((a^*)^2 + (b^*)^2 - (c^*)^2 - (d^*)^2) &amp;          2(b^* c^* - a^* d^*)           &amp;          2(b^* d^* + a^* c^*)           \\
                                             2(b^* c^* + a^* d^*)           &amp; ((a^*)^2 - (b^*)^2 + (c^*)^2 - (d^*)^2) &amp;          2(c^* d^* - a^* b^*)           \\
                                             2(b^* d^* - a^* c^*)           &amp;          2(c^* d^* + a^* b^*)           &amp; ((a^*)^2 - (b^*)^2 - (c^*)^2 + (d^*)^2) \end{bmatrix} \\
\end{aligned}
\end{equation}" src="form_139.svg" width="1929" height="203"/></picture>
</p>
<p> Comparing Jekeli's DCM <a class="el" href="group__ImuIntegrator__n.html#eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-DCM-Jekeli"><picture><source srcset="form_140_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="\eqref{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-DCM-Jekeli}" src="form_140.svg" width="33" height="19"/></picture> </a> with Titterton's <a class="el" href="group__ImuIntegrator__n.html#eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-DCM-Titterton"><picture><source srcset="form_141_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="\eqref{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-DCM-Titterton}" src="form_141.svg" width="33" height="19"/></picture> </a>, it can easily be shown, that the quaternion is the complex conjugate (see <a class="el" href="citelist.html#CITEREF_Jekeli2001">[14]</a> Jekeli, ch. 4.2.3.1, eq. 4.21,4.23, p. 114f) <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-matrix-Jekeli"></a> </p><p class="formulaDsp">
<picture><source srcset="form_142_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-matrix-Jekeli}
  \mathbf{\dot{q}}
      = \begin{bmatrix} \dotup{a} \\ \dotup{b} \\ \dotup{c} \\ \dotup{d} \end{bmatrix}
      = \frac{1}{2} \begin{bmatrix}     0     &amp;  \omega_{nb,x}^b &amp;  \omega_{nb,y}^b &amp;  \omega_{nb,z}^b \\
                                    -\omega_{nb,x}^b &amp;     0     &amp;  \omega_{nb,z}^b &amp; -\omega_{nb,y}^b \\
                                    -\omega_{nb,y}^b &amp; -\omega_{nb,z}^b &amp;     0     &amp;  \omega_{nb,x}^b \\
                                    -\omega_{nb,z}^b &amp;  \omega_{nb,y}^b &amp; -\omega_{nb,x}^b &amp;     0     \end{bmatrix}
                    \begin{bmatrix} a \\ b \\ c \\ d \end{bmatrix}
\end{equation}" src="form_142.svg" width="1684" height="89"/></picture>
</p>
<p> Replacing the complex conjugated quaternion leads to the same equation as Titterton's <a class="el" href="group__ImuIntegrator__n.html#eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-matrix-Titterton-2"><picture><source srcset="form_143_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="\eqref{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-matrix-Titterton-2}" src="form_143.svg" width="33" height="19"/></picture> </a> <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-matrix-Jekeli-conjugated"></a> </p><p class="formulaDsp">
<picture><source srcset="form_144_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-matrix-Jekeli-conjugated}
\begin{aligned}
  \mathbf{\dot{q}}_b^n
      &amp;= \begin{bmatrix} \dotup{a}^* \\ -\dotup{b}^* \\ -\dotup{c}^* \\ -\dotup{d}^* \end{bmatrix}
       = \frac{1}{2} \begin{bmatrix}     0     &amp;  \omega_{nb,x}^b &amp;  \omega_{nb,y}^b &amp;  \omega_{nb,z}^b \\
                                     -\omega_{nb,x}^b &amp;     0     &amp;  \omega_{nb,z}^b &amp; -\omega_{nb,y}^b \\
                                     -\omega_{nb,y}^b &amp; -\omega_{nb,z}^b &amp;     0     &amp;  \omega_{nb,x}^b \\
                                     -\omega_{nb,z}^b &amp;  \omega_{nb,y}^b &amp; -\omega_{nb,x}^b &amp;     0     \end{bmatrix}
                     \begin{bmatrix} a^* \\ -b^* \\ -c^* \\ -d^* \end{bmatrix} \\
      &amp;= \begin{bmatrix} \dotup{a}^* \\ -\dotup{b}^* \\ -\dotup{c}^* \\ -\dotup{d}^* \end{bmatrix}
       = \frac{1}{2} \begin{bmatrix}     0     &amp; -\omega_{nb,x}^b &amp; -\omega_{nb,y}^b &amp; -\omega_{nb,z}^b \\
                                     -\omega_{nb,x}^b &amp;     0     &amp; -\omega_{nb,z}^b &amp;  \omega_{nb,y}^b \\
                                     -\omega_{nb,y}^b &amp;  \omega_{nb,z}^b &amp;     0     &amp; -\omega_{nb,x}^b \\
                                     -\omega_{nb,z}^b &amp; -\omega_{nb,y}^b &amp;  \omega_{nb,x}^b &amp;     0     \end{bmatrix}
                     \begin{bmatrix} a^* \\ b^* \\ c^* \\ d^* \end{bmatrix} \\
      &amp;= \begin{bmatrix} \dotup{a}^* \\ \dotup{b}^* \\ \dotup{c}^* \\ \dotup{d}^* \end{bmatrix}
       = \frac{1}{2} \begin{bmatrix}     0     &amp; -\omega_{nb,x}^b &amp; -\omega_{nb,y}^b &amp; -\omega_{nb,z}^b \\
                                      \omega_{nb,x}^b &amp;     0     &amp;  \omega_{nb,z}^b &amp; -\omega_{nb,y}^b \\
                                      \omega_{nb,y}^b &amp; -\omega_{nb,z}^b &amp;     0     &amp;  \omega_{nb,x}^b \\
                                      \omega_{nb,z}^b &amp;  \omega_{nb,y}^b &amp; -\omega_{nb,x}^b &amp;     0     \end{bmatrix}
                     \begin{bmatrix} a^* \\ b^* \\ c^* \\ d^* \end{bmatrix}
\end{aligned}
\end{equation}" src="form_144.svg" width="1710" height="280"/></picture>
</p>
<h3><a class="anchor" id="ImuIntegrator-Mechanization-n-Attitude-Quaternion-Comparison-Groves"></a>
Groves</h3>
<p>Groves defines his Quaternion update in two arbitrary frames (<a class="el" href="citelist.html#CITEREF_Groves2013">[11]</a> Groves, Appendix E, ch. E.6.2, eq. E.32, p. E-12) <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-Groves-E32"></a> </p><p class="formulaDsp">
<picture><source srcset="form_145_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-Groves-E32}
  \mathbf{\dot{q}}_\beta^\alpha
      = \begin{bmatrix} \dotup{a} \\ \dotup{b} \\ \dotup{c} \\ \dotup{d} \end{bmatrix}
      = \frac{1}{2} \begin{bmatrix}               0               &amp; -\omega_{\beta\alpha,x}^\alpha &amp; -\omega_{\beta\alpha,y}^\alpha &amp; -\omega_{\beta\alpha,z}^\alpha \\
                                    \omega_{\beta\alpha,x}^\alpha &amp;                0               &amp;  \omega_{\beta\alpha,z}^\alpha &amp; -\omega_{\beta\alpha,y}^\alpha \\
                                    \omega_{\beta\alpha,y}^\alpha &amp; -\omega_{\beta\alpha,z}^\alpha &amp;                0               &amp;  \omega_{\beta\alpha,x}^\alpha \\
                                    \omega_{\beta\alpha,z}^\alpha &amp;  \omega_{\beta\alpha,y}^\alpha &amp; -\omega_{\beta\alpha,x}^\alpha &amp;                0               \end{bmatrix}
        \mathbf{q}_\beta^\alpha
      = \frac{1}{2} \begin{bmatrix}              0               &amp; -\omega_{\beta\alpha,x}^\beta &amp; -\omega_{\beta\alpha,y}^\beta &amp; -\omega_{\beta\alpha,z}^\beta \\
                                    \omega_{\beta\alpha,x}^\beta &amp;               0               &amp; -\omega_{\beta\alpha,z}^\beta &amp;  \omega_{\beta\alpha,y}^\beta \\
                                    \omega_{\beta\alpha,y}^\beta &amp;  \omega_{\beta\alpha,z}^\beta &amp;               0               &amp; -\omega_{\beta\alpha,x}^\beta \\
                                    \omega_{\beta\alpha,z}^\beta &amp; -\omega_{\beta\alpha,y}^\beta &amp;  \omega_{\beta\alpha,x}^\beta &amp;               0               \end{bmatrix}
        \mathbf{q}_\beta^\alpha
\end{equation}" src="form_145.svg" width="1855" height="100"/></picture>
</p>
<p> This can be expresed for the body rate with respect to the navigation frame in body frame coordinates <picture><source srcset="form_105_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{\omega}_{nb}^b $" src="form_105.svg" width="28" height="21"/></picture> <a class="anchor" id="eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-Groves-E32-bn"></a> </p><p class="formulaDsp">
<picture><source srcset="form_146_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-n-Attitude-Quaternion-Groves-E32-bn}
  \mathbf{\dot{q}}_n^b
      = \begin{bmatrix} \dotup{a} \\ \dotup{b} \\ \dotup{c} \\ \dotup{d} \end{bmatrix}
      = \frac{1}{2} \begin{bmatrix}        0        &amp; -\omega_{nb,x}^b &amp; -\omega_{nb,y}^b &amp; -\omega_{nb,z}^b \\
                                    \omega_{nb,x}^b &amp;         0        &amp;  \omega_{nb,z}^b &amp; -\omega_{nb,y}^b \\
                                    \omega_{nb,y}^b &amp; -\omega_{nb,z}^b &amp;         0        &amp;  \omega_{nb,x}^b \\
                                    \omega_{nb,z}^b &amp;  \omega_{nb,y}^b &amp; -\omega_{nb,x}^b &amp;         0        \end{bmatrix}
        \mathbf{q}_n^b
\end{equation}" src="form_146.svg" width="1677" height="89"/></picture>
</p>
<p> which is the same as Titterton and Jekeli </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
    <!-- id is needed for treeview function! -->
    <ul>
        <li class="footer">Generated on Thu Feb 23 2023 17:40:28 for INSTINCT by <a href="https://www.doxygen.org/index.html"><img class="footer"
                    src="doxygen.svg" width="104" height="31" alt="doxygen" /></a> 1.9.6 </li>
    </ul>
</div>
</body>
</html>
